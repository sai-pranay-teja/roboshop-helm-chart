apiVersion: v1
kind: Pod
metadata:
  name: {{ .Values.component }}
  labels:
    component: {{ .Values.component }}
spec:
  serviceAccountName: {{ .Values.component }}
  containers:
    - name: {{ .Values.component }}
      image: 581798224530.dkr.ecr.us-east-1.amazonaws.com/{{ .Values.component }}:{{ .Values.component }}
      volumeMounts:
      - mountPath: /params
        name: params
  initContainers:
    - name: ssm-for-parameters
      image: 581798224530.dkr.ecr.us-east-1.amazonaws.com/aws-params:1.0.9
      args: [ {{ .Values.params }} ]
      volumeMounts:
      - mountPath: /params
        name: params
  volumes:
  - name: params
    emptyDir:
      sizeLimit: 500Mi

